# What is JWT?
JWT (JSON Web Token) is an open standard that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. It is basically a string of random alphanumberic characters

# jwt-component
WT includes 3 parts:
- Header: describe the cryptographic operations to the JWT data
- Payload: contains verifiable security statements, another word is "Claims"
- Signature: Is generated using payload/header and secret key

![This is an image](https://miro.medium.com/max/1838/0*RD3xXYq863wEZjXp.png)

If you want more information about JWT, you can access a link https://jwt.io/. The site provides a tool which helps you parse/verify JWT token.

# jwt-signature
- Signature is generated using payload/header and secret key. The authentication server generated a signature and resource server need verify the signature to ensure the JWT has not been changed during transmission.
- The key for generate signature can be symmetric key or asymmetric key (public/private pair).

## jwt-signature-symmetric-key
### Pre-condition
The authentication server and resource server must be shared a secret key. No one else can know about it, otherwise the accuracy of JWT will be broken. That look like you lock a door but anyone has a key to open it ^^.

### Generate signature on Authentication server
- Client sends a login request to Authentication server using authentication mechanism: knowledge (something only the user knows - regular is username/password pair), possession (something only the user has), and inherence (something only the user is). 
- If client is authenticated, the Authentication server will generate a JWT token by combined user credentials and a secret key. You can scroll up to jwt-signature section to know format of a JWT token.
- After generated sucessfully, the Authentication server returns a JWT token to Client. Client stores a JWT token somewthere where you can use it later (Ex: local storage, variable in browser ... or write down to paper if they want ^^).

### Validate signature on Resource server
- Client sends arequest to get a data from resource server. This request have a JWT token attached in somewhere (regular is attribute 'Authorization' in HTTP request header).
- The Resource server receives a request from Client. They get a JWT token in request and validate them by some steps below:
  - Take the original Base64url-encoded Header and original Base64url-encoded Payload segments (Base64url-encoded Header + "." + Base64url-encoded Payload), and hash them with SHA-256.
  - Encrypt using HMAC and the secret key, the output is 'Verify Signature'. If the signture in JWT token and 'Verify Signature' is the same, this proves the JWT is generated by the Authentication server and user who has this token was authenticated. If not, he is imposter.
- After validate signature successfully, Resource server based on the user and his roles will return data into him.

## jwt-signature-asymmetric-key
### Pre-condition
- The public/private key pair must be generated before. 
- Authentication server keeps private key and must not expose this key to someone else.
- Resource server keeps public key. This key may be expose and transmit via internet without any problem.
- For more information about asymmetric key, you can visit https://en.wikipedia.org/wiki/Public-key_cryptography.
### Generate signature on Authentication server and Validate signature on Resource server
Same as symmetric-key. Only one point difference is Authentication server signs by private key, and Resource server validates by public key.

# Demo
- This project contains 2 sub-projects: Authentication server and Resource server, you can build them separately.
- You cannot run project by default configuration, you **must specify an active profiles** to run:
  - To run server using symmetric mechanism: Add a environment variables: **SPRING_PROFILES_ACTIVE=jwt-secretKey**
  - To run server using asymmetric mechanism: Add a environment variables: **SPRING_PROFILES_ACTIVE=jwt-asymmetricKey**
